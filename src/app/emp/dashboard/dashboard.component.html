<div class="content-wrap">
  <div class="main" style="padding: 0px 0px 0px 16%;">
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-8 p-r-0 title-margin-right">
          <div class="page-header">
            <div class="page-title">
              <h1>Hello, {{empData.first_name}} {{empData.last_name}}<span> Welcome Here</span></h1>
            </div>
          </div>
        </div>
      </div>
      <!-- /# row -->
      <section id="main-content">
        <div class="row" *ngIf="empData.role==1">
          <div class="col-lg-3">
            <div class="card">
              <div class="stat-widget-one">
                <div class="stat-icon dib"><i class="ti-book color-success border-success"></i></div>
                <div class="stat-content dib">
                  <div class="stat-text">Total Application</div>
                  <div class="stat-digit">{{totalApplicationsCount}}</div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-3">
            <div class="card">
              <div class="stat-widget-one">
                <div class="stat-icon dib"><i class="ti-user color-primary border-primary"></i></div>
                <div class="stat-content dib">
                  <div class="stat-text">Total Customer</div>
                  <div class="stat-digit">{{totalCustomersCount}}</div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-3">
            <div class="card">
              <div class="stat-widget-one">
                <div class="stat-icon dib"><i class="ti-layout-grid2 color-pink border-pink"></i></div>
                <div class="stat-content dib">
                  <div class="stat-text">Total Employee</div>
                  <div class="stat-digit">{{totalEmployeeCount}}</div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-3">
            <div class="card">
              <div class="stat-widget-one">
                <div class="stat-icon dib"><i class="ti-book color-danger border-danger"></i></div>
                <div class="stat-content dib">
                  <div class="stat-text">In Progress</div>
                  <div class="stat-digit">{{totalInProgressApplicationCount}}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row" *ngIf="empData.role==0">
          <div class="col-lg-3">
            <div class="card">
              <div class="stat-widget-one">
                <div class="stat-icon dib"><i class="ti-book color-success border-success"></i></div>
                <div class="stat-content dib">
                  <div class="stat-text">Total Application</div>
                  <div class="stat-digit">{{totalApplicationForEmployeeCount}}</div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-3">
            <div class="card">
              <div class="stat-widget-one">
                <div class="stat-icon dib"><i class="ti-user color-primary border-primary"></i></div>
                <div class="stat-content dib">
                  <div class="stat-text">Total Task</div>
                  <div class="stat-digit">{{totalTaskForEmployeeCount}}</div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-3">
            <div class="card">
              <div class="stat-widget-one">
                <div class="stat-icon dib"><i class="ti-layout-grid2 color-pink border-pink"></i></div>
                <div class="stat-content dib">
                  <div class="stat-text">Total Approved</div>
                  <div class="stat-digit">{{totalApprovedApplicationCount}}</div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-3">
            <div class="card">
              <div class="stat-widget-one">
                <div class="stat-icon dib"><i class="ti-book color-danger border-danger"></i></div>
                <div class="stat-content dib">
                  <div class="stat-text">Total Rejected</div>
                  <div class="stat-digit">{{totalRejectedApplicationCount}}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <div class="row text-center" *ngIf="empData.role == 1">
              <div class="col-lg-2">
                <input type="text" class="form-control input-default " placeholder="First Name"
                  [(ngModel)]="a.first_name">
              </div>
              <div class="col-lg-2">
                <input type="text" class="form-control input-default " placeholder="Last Name"
                  [(ngModel)]="a.last_name">
              </div>
              <div class="col-lg-2">
                <input type="text" class="form-control input-default " placeholder="Email" [(ngModel)]="a.email">
              </div>
              <div class="col-lg-2">
                <input type="text" class="form-control input-default " placeholder="Phone Number" [(ngModel)]="a.phone">
              </div>
              <div class="col-lg-2">
                <button class="btn btn-success" type="button" (click)="search()"><i class="fa fa-search-o"
                    aria-hidden="true"></i>
                  Search</button>
              </div>
              <div class="col-lg-2">
                <button class="btn btn-info" type="button" (click)="clear()"><i class="fa fa-search-o"
                    aria-hidden="true"></i>
                  Clear</button>
              </div>
            </div>
            <div class="row text-center" *ngIf="empData.role == 0">
              <div class="col-lg-2">
                <input type="text" class="form-control input-default " placeholder="First Name"
                  [(ngModel)]="a.first_name">
              </div>
              <div class="col-lg-2">
                <input type="text" class="form-control input-default " placeholder="Last Name"
                  [(ngModel)]="a.last_name">
              </div>
              <div class="col-lg-2">
                <input type="text" class="form-control input-default " placeholder="Email" [(ngModel)]="a.email">
              </div>
              <div class="col-lg-2">
                <input type="text" class="form-control input-default " placeholder="Phone Number" [(ngModel)]="a.phone">
              </div>
              <div class="col-lg-2">
                <button class="btn btn-success" type="button" (click)="searchByEmpId()"><i class="fa fa-search-o"
                    aria-hidden="true"></i>
                  Search</button>
              </div>
              <div class="col-lg-2">
                <button class="btn btn-info" type="button" (click)="clear()"><i class="fa fa-search-o"
                    aria-hidden="true"></i>
                  Clear</button>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12">
            <div class="card">
              <div class="card-body">
                <div class="table-responsive" *ngIf="empData.role == 1 && totalApplicationsCount > 0">
                  <table class="table student-data-table m-t-20">
                    <thead>
                      <tr>
                        <th>ID</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Status</th>
                        <th>Is Assigned</th>
                        <th>Email</th>
                        <th>Phone Number</th>
                        <th>Driving License</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr (click)="viewApplication(a)" *ngFor="let a of app; let i = index">
                        <td>{{i+1}}</td>
                        <td>{{a.first_name}}</td>
                        <td>{{a.last_name}}</td>
                        <td>
                          <span class="badge"
                            [ngClass]="{'badge-warning' : a.status==1, 'badge-primary' : a.status==2, 'badge-success' : a.status==3, 'badge-danger' : a.status==4}">{{a.status==1 ? 'Open' : a.status==2 ? 'In Progress' : a.status==3 ? 'Accepted' : 'Rejected'}}</span>
                        </td>
                        <td><span [ngClass]="{'text-danger' : a.assigned == false, 'text-success' : a.assigned == true}"><b>{{a.assigned == false ? 'No' : 'Yes'}}</b></span></td>
                        <td>{{a.email}}</td>
                        <td>{{a.phone}}</td>
                        <td>{{a.driving_license}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="text-center" *ngIf="empData.role == 1 && totalApplicationsCount == 0">
                  <h4 class="text-info">No loan application submitted</h4>
                </div>
                <div class="table-responsive" *ngIf="empData.role == 0 && totalApplicationForEmployeeSearchCount > 0">
                  <table class="table student-data-table m-t-20">
                    <thead>
                      <tr>
                        <th>ID</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Status</th>
                        <th>Email</th>
                        <th>Phone Number</th>
                        <th>Driving License</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr (click)="viewApplication(a)" *ngFor="let a of app; let i = index"
                        [ngClass]="{'unread' : a.read==false}">
                        <td>{{i+1}}</td>
                        <td>{{a.first_name}}</td>
                        <td>{{a.last_name}}</td>
                        <td>
                          <span class="badge"
                            [ngClass]="{'badge-warning' : a.status==1, 'badge-primary' : a.status==2, 'badge-success' : a.status==3, 'badge-danger' : a.status==4}">{{a.status==1 ? 'Open' : a.status==2 ? 'In Progress' : a.status==3 ? 'Accepted' : 'Rejected'}}</span>
                        </td>
                        <td>{{a.email}}</td>
                        <td>{{a.phone}}</td>
                        <td>{{a.driving_license}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="text-center" *ngIf="empData.role == 0 && totalApplicationForEmployeeSearchCount == 0">
                  <h4 class="text-info">You have no loan application assigned</h4>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
</div>